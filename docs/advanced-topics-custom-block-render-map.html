<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Custom Block Rendering · Draft.js</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Custom Block Rendering · Draft.js"/><meta property="og:type" content="website"/><meta property="og:url" content="https://draftjs.org/index.html"/><meta property="og:description" content="This article discusses how to customize Draft default block rendering."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-forest-light.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-19', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Draft.js</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/facebook/draft-js" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Advanced Topics</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Quick Start</h3><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/quickstart-api-basics.html">API Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/quickstart-rich-styling.html">Rich Styling</a></li></ul></div><div class="navGroup navGroupActive"><h3>Advanced Topics</h3><ul><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-entities.html">Entities</a></li><li class="navListItem"><a class="navItem" href="/docs/v0-10-api-migration.html">v0.10 API Migration</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-decorators.html">Decorators</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-key-bindings.html">Key Bindings</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-managing-focus.html">Managing Focus</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-block-styling.html">Block Styling</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/advanced-topics-custom-block-render-map.html">Custom Block Rendering</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-block-components.html">Custom Block Components</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-inline-styles.html">Complex Inline Styles</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-nested-lists.html">Nested Lists</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-text-direction.html">Text Direction</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-editorstate-race-conditions.html">EditorState Race Conditions</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-topics-issues-and-pitfalls.html">Issues and Pitfalls</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/docs/api-reference-editor.html">Editor Component</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-editor-change-type.html">EditorChangeType</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-editor-state.html">EditorState</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-content-state.html">ContentState</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-content-block.html">ContentBlock</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-character-metadata.html">CharacterMetadata</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-entity.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-selection-state.html">SelectionState</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-composite-decorator.html">CompositeDecorator</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-data-conversion.html">Data Conversion</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-rich-utils.html">RichUtils</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-atomic-block-utils.html">AtomicBlockUtils</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-key-binding-util.html">KeyBindingUtil</a></li><li class="navListItem"><a class="navItem" href="/docs/api-reference-modifier.html">Modifier</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Custom Block Rendering</h1></header><article><div><span><p>This article discusses how to customize Draft default block rendering.
The block rendering is used to define supported block types and their respective
renderers, as well as converting pasted content to known Draft block types.</p>
<p>When pasting content or when using the
<a href="/docs/api-reference-data-conversion.html#convertfromhtml">convertFromHTML</a>
Draft will then convert the pasted content to the respective block rendering type
by matching the Draft block render map with the matched tag.</p>
<h2><a class="anchor" aria-hidden="true" id="draft-default-block-render-map"></a><a href="#draft-default-block-render-map" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Draft default block render map</h2>
<table>
<thead>
<tr><th>HTML element</th><th>Draft block type</th></tr>
</thead>
<tbody>
<tr><td><code>&lt;h1/&gt;</code></td><td>header-one</td></tr>
<tr><td><code>&lt;h2/&gt;</code></td><td>header-two</td></tr>
<tr><td><code>&lt;h3/&gt;</code></td><td>header-three</td></tr>
<tr><td><code>&lt;h4/&gt;</code></td><td>header-four</td></tr>
<tr><td><code>&lt;h5/&gt;</code></td><td>header-five</td></tr>
<tr><td><code>&lt;h6/&gt;</code></td><td>header-six</td></tr>
<tr><td><code>&lt;blockquote/&gt;</code></td><td>blockquote</td></tr>
<tr><td><code>&lt;pre/&gt;</code></td><td>code-block</td></tr>
<tr><td><code>&lt;figure/&gt;</code></td><td>atomic</td></tr>
<tr><td><code>&lt;li/&gt;</code></td><td>unordered-list-item,ordered-list-item**</td></tr>
<tr><td><code>&lt;div/&gt;</code></td><td>unstyled***</td></tr>
</tbody>
</table>
<p>** - Block type will be based on the parent <code>&lt;ul/&gt;</code> or <code>&lt;ol/&gt;</code></p>
<p>*** -  Any block that is not recognized by the block rendering mapping will be treated as unstyled</p>
<h2><a class="anchor" aria-hidden="true" id="configuring-block-render-map"></a><a href="#configuring-block-render-map" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring block render map</h2>
<p>Draft default block render map can be overwritten, by passing an
<a href="http://facebook.github.io/immutable-js/docs/#/Map">Immutable Map</a> to
the editor blockRender props.</p>
<p><em>example of overwritting default block render map:</em></p>
<pre><code class="hljs css js"><span class="hljs-comment">// The example below deliberately only allows</span>
<span class="hljs-comment">// 'heading-two' as the only valid block type and</span>
<span class="hljs-comment">// updates the unstyled element to also become a h2.</span>
<span class="hljs-keyword">const</span> blockRenderMap = Immutable.Map({
  <span class="hljs-string">'header-two'</span>: {
    <span class="hljs-attr">element</span>: <span class="hljs-string">'h2'</span>
  },
  <span class="hljs-string">'unstyled'</span>: {
    <span class="hljs-attr">element</span>: <span class="hljs-string">'h2'</span>
  }
});

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RichEditor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Editor</span>
        <span class="hljs-attr">...</span>
        <span class="hljs-attr">blockRenderMap</span>=<span class="hljs-string">{blockRenderMap}</span>
      /&gt;</span>
    );
  }
}
</span></code></pre>
<p>There are cases where instead of overwriting the defaults we just want to add new block types;
this can be done by using the DefaultDraftBlockRenderMap reference to create a new blockRenderMap</p>
<p><em>example of extending default block render map:</em></p>
<pre><code class="hljs css js"><span class="hljs-keyword">const</span> blockRenderMap = Immutable.Map({
  <span class="hljs-string">'section'</span>: {
    <span class="hljs-attr">element</span>: <span class="hljs-string">'section'</span>
  }
});

<span class="hljs-comment">// Include 'paragraph' as a valid block and updated the unstyled element but</span>
<span class="hljs-comment">// keep support for other draft default block types</span>
<span class="hljs-keyword">const</span> extendedBlockRenderMap = Draft.DefaultDraftBlockRenderMap.merge(blockRenderMap);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RichEditor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Editor</span>
        <span class="hljs-attr">...</span>
        <span class="hljs-attr">blockRenderMap</span>=<span class="hljs-string">{extendedBlockRenderMap}</span>
      /&gt;</span>
    );
  }
}
</span></code></pre>
<p>When Draft parses pasted HTML, it maps from HTML elements back into
Draft block types. If you want to specify other HTML elements that map to a
particular block type, you can add an array <code>aliasedElements</code> to the block config.</p>
<p><em>example of unstyled block type alias usage:</em></p>
<pre><code class="hljs"><span class="hljs-string">'unstyled'</span>: {
  elemen<span class="hljs-variable">t:</span> <span class="hljs-string">'div'</span>,
  aliasedElement<span class="hljs-variable">s:</span> [<span class="hljs-string">'p'</span>],
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="custom-block-wrappers"></a><a href="#custom-block-wrappers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom block wrappers</h2>
<p>By default the html element is used to wrap block types however a react component
can also be provided to the <em>blockRenderMap</em> to wrap the EditorBlock.</p>
<p>During pasting or when using the
<a href="/docs/api-reference-data-conversion.html#convertfromhtml">convertFromHTML</a>
the html will be scanned for matching tag elements. A wrapper will be used when there is a definition for
it on the <em>blockRenderMap</em> to wrap that particular block type. For example:</p>
<p>Draft uses wrappers to wrap <code>&lt;li/&gt;</code> inside either <code>&lt;ol/&gt;</code> or <code>&lt;ul/&gt;</code> but wrappers can also be used
to wrap any other custom block type</p>
<p><em>example of extending default block render map to use a react component for a custom block:</em></p>
<pre><code class="hljs css js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyCustomBlock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);
  }

  render() {
    <span class="hljs-keyword">return</span> (
      &lt;div className='MyCustomBlock'&gt;
        {/* here, this.props.children contains a &lt;section&gt; container, as that was the matching element */}
        {this.props.children}
      &lt;/div&gt;
    );
  }
}

const blockRenderMap = Immutable.Map({
  'MyCustomBlock': {
    // element is used during paste or html conversion to auto match your component;
    // it is also retained as part of this.props.children and not stripped out
    element: 'section',
    wrapper: MyCustomBlock,
  }
});

// keep support for other draft default block types and add our myCustomBlock type
const extendedBlockRenderMap = Draft.DefaultDraftBlockRenderMap.merge(blockRenderMap);

class RichEditor extends React.Component {
  ...
  render() {
    return (
      &lt;Editor
        ...
        blockRenderMap={extendedBlockRenderMap}
      /&gt;
    );
  }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="advanced-topics-block-styling.html">← Block Styling</a><a class="docs-next button" href="advanced-topics-block-components.html">Custom Block Components →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/docs/getting-started.html">Getting Started</a><a href="/docs/api-reference-editor.html">API Reference</a></div><div><h5>Community</h5><a href="http://stackoverflow.com/questions/tagged/draftjs" target="_blank">Stack Overflow</a><a href="https://twitter.com/draft_js" target="_blank">Twitter</a></div><div><h5>More</h5><a href="https://github.com/facebook/draft-js">GitHub</a><a class="github-button" href="https://github.com/facebook/draft-js" data-icon="octicon-star" data-count-href="/facebook/draft-js/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook Inc.</section></footer></div></body></html>